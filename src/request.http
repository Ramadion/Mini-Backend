#######-------------USUARIOS---------------###########

### CREAR USUARIO
POST http://localhost:3000/users
Content-Type: application/json

{
  "name": "Nombre del usuario",
  "rol": "admin" // o "user"
}

### LISTAR TODOS LOS USUARIOS
GET http://localhost:3000/users

### ACTUALIZAR USUARIO
PUT http://localhost:3000/users/1
Content-Type: application/json

{
  "name": "Nuevo nombre",
  "rol": "user"
}

### ELIMINAR USUARIO
DELETE http://localhost:3000/users/1


#######-------------EQUIPOS---------------###########

### CREAR EQUIPO
POST http://localhost:3000/teams
Content-Type: application/json

{
  "name": "Nombre del equipo",
  "propietarioId": 1
}

### LISTAR TODOS LOS EQUIPOS
GET http://localhost:3000/teams

### OBTENER EQUIPO ESPECÍFICO
GET http://localhost:3000/teams/1

### ACTUALIZAR EQUIPO
PUT http://localhost:3000/teams/1
Content-Type: application/json

{
  "name": "Nuevo nombre del equipo",
  "actorUserId": 1
}

### ELIMINAR EQUIPO
DELETE http://localhost:3000/teams/1
Content-Type: application/json

{
  "actorUserId": 1
}


#######-------------GESTION DE MIEMBROS EN EQUIPOS---------------###########

### AGREGAR MIEMBRO A EQUIPO
POST http://localhost:3000/teams/1/miembros
Content-Type: application/json

{
  "userId": 2,
  "rol": "MIEMBRO", // o "PROPIETARIO"
  "actorUserId": 1
}

### LISTAR MIEMBROS DE UN EQUIPO
GET http://localhost:3000/teams/1/miembros

### CAMBIAR ROL DE MIEMBRO
PUT http://localhost:3000/teams/1/miembros/2
Content-Type: application/json

{
  "nuevoRol": "PROPIETARIO",
  "actorUserId": 1
}

### REMOVER MIEMBRO DE EQUIPO
DELETE http://localhost:3000/teams/1/miembros/2
Content-Type: application/json

{
  "actorUserId": 1
}


#######-------------TAREAS (SISTEMA ANTIGUO - MANTENER COMPATIBILIDAD)---------------###########

### CREAR TAREA (solo propietarios del equipo)
POST http://localhost:3000/tasks
Content-Type: application/json

{
  "title": "Título de la tarea",
  "description": "Descripción de la tarea",
  "teamId": 1,
  "userId": 1
}

### LISTAR TAREAS (según permisos del usuario)
GET http://localhost:3000/tasks/1

### ACTUALIZAR TAREA
PUT http://localhost:3000/tasks/1
Content-Type: application/json

{
  "userId": 1,
  "title": "Nuevo título",
  "description": "Nueva descripción",
  "priority": "alta"
}

### ELIMINAR TAREA
DELETE http://localhost:3000/tasks/1
Content-Type: application/json

{
  "userId": 1
}


#######-------------SISTEMA DE ESTADOS---------------###########

### CAMBIAR ESTADO DE TAREA (PENDIENTE, EN_CURSO, FINALIZADA, CANCELADA)
PUT http://localhost:3000/tareas/1/estado
Content-Type: application/json

{
  "estado": "EN_CURSO",
  "usuarioId": 1
}

### OBTENER HISTORIAL DE CAMBIOS DE ESTADO DE UNA TAREA
GET http://localhost:3000/tareas/1/historial

### OBTENER TAREAS POR ESTADO Y EQUIPO
GET http://localhost:3000/equipos/1/tareas/PENDIENTE

### OBTENER TAREAS EN CURSO DE UN EQUIPO
GET http://localhost:3000/equipos/1/tareas/EN_CURSO

### OBTENER TAREAS FINALIZADAS DE UN EQUIPO
GET http://localhost:3000/equipos/1/tareas/FINALIZADA

### OBTENER TAREAS CANCELADAS DE UN EQUIPO
GET http://localhost:3000/equipos/1/tareas/CANCELADA


#######-------------FLUJO COMPLETO DE PRUEBA---------------###########

### 1. CREAR USUARIOS BASE
POST http://localhost:3000/users
Content-Type: application/json

{
  "name": "Admin Principal",
  "rol": "admin"
}

###
POST http://localhost:3000/users
Content-Type: application/json

{
  "name": "Usuario Normal",
  "rol": "user"
}

### 2. CREAR EQUIPO
POST http://localhost:3000/teams
Content-Type: application/json

{
  "name": "Equipo de Desarrollo",
  "propietarioId": 1
}

### 3. AGREGAR MIEMBRO AL EQUIPO
POST http://localhost:3000/teams/1/miembros
Content-Type: application/json

{
  "userId": 2,
  "rol": "MIEMBRO",
  "actorUserId": 1
}

### 4. CREAR TAREAS
POST http://localhost:3000/tasks
Content-Type: application/json

{
  "title": "Tarea 1 - Pendiente",
  "description": "Esta tarea empezará en estado PENDIENTE",
  "teamId": 1,
  "userId": 1
}

###
POST http://localhost:3000/tasks
Content-Type: application/json

{
  "title": "Tarea 2 - En Curso",
  "description": "Esta tarea la pondremos en EN_CURSO",
  "teamId": 1,
  "userId": 1
}

### 5. CAMBIAR ESTADOS DE TAREAS (FLUJO KANBAN)
### Tarea 1: PENDIENTE -> EN_CURSO
PUT http://localhost:3000/tareas/1/estado
Content-Type: application/json

{
  "estado": "EN_CURSO",
  "usuarioId": 1
}

### Tarea 2: PENDIENTE -> EN_CURSO
PUT http://localhost:3000/tareas/2/estado
Content-Type: application/json

{
  "estado": "EN_CURSO",
  "usuarioId": 1
}

### Tarea 1: EN_CURSO -> FINALIZADA
PUT http://localhost:3000/tareas/1/estado
Content-Type: application/json

{
  "estado": "FINALIZADA",
  "usuarioId": 1
}

### 6. VER HISTORIAL DE TAREA 1
GET http://localhost:3000/tareas/1/historial

### 7. VER TAREAS POR ESTADO
GET http://localhost:3000/equipos/1/tareas/PENDIENTE

GET http://localhost:3000/equipos/1/tareas/EN_CURSO

GET http://localhost:3000/equipos/1/tareas/FINALIZADA

### 8. INTENTAR CAMBIO INVÁLIDO (debería fallar)
PUT http://localhost:3000/tareas/1/estado
Content-Type: application/json

{
  "estado": "PENDIENTE",
  "usuarioId": 1
}

### 9. VERIFICAR RESTRICCIONES (intentar editar tarea finalizada)
PUT http://localhost:3000/tasks/1
Content-Type: application/json

{
  "userId": 1,
  "title": "Intentar cambiar título de tarea finalizada",
  "description": "Esta edición debería fallar"
}